<?php 
$term = 2154;

$score= array(
	"Erin Dokter"=>array(
		"point" =>"5.0",
		"grade"=>"A"
	),
	"Thomas Park"=>array(
		"point" =>"2.7",
		"grade"=>"A"
	),
	"Stephen Poe"=>array(
		"point" =>"4.0",
		"grade"=>"A+"
	),
	"Praise Zenenga"=>array(
		"point" =>"3.6",
		"grade"=>"A"
	),
	"Peter Waller"=>array(
		"point" =>"3.6",
		"grade"=>"A-"
	),
	"Praise Zenenga"=>array(
		"point" =>"3.6",
		"grade"=>"A"
	),
"Loukas Lazos"=>array(
		"point" =>"4.0",
		"grade"=>"B"
	),
"Ratchaneekorn Thamvichai"=>array(
		"point" =>"4.2",
		"grade"=>"B"
	),
"Jonathan Sprinkle"=>array(
		"point" =>"4.4",
		"grade"=>"B"
	),
"Elizabeth Eadie"=>array(
		"point" =>"3.7",
		"grade"=>"A-"
	),
"Emily Umberger"=>array(
		"point" =>"2.9",
		"grade"=>"A"
	),
"Mohammad Poursina"=>array(
		"point" =>"4.7",
		"grade"=>"A"
	),
"Derek Lemoine"=>array(
		"point" =>"3.5",
		"grade"=>"B"
	),
"Sarah Moore"=>array(
		"point" =>"4.7",
		"grade"=>"A"
	),
"Xiaoyi Wu"=>array(
		"point" =>"2.0",
		"grade"=>"B"
	),
"Pierre Lucas"=>array(
		"point" =>"3.5",
		"grade"=>"C"
	),
"Emily Umberger"=>array(
		"point" =>"2.9",
		"grade"=>"A"
	),
"Hoshin Gupta"=>array(
		"point" =>"5.0",
		"grade"=>"A"
	),
	"Jennifer Ricketts"=>array(
		"point" =>"2.9",
		"grade"=>"B"
	),
	"Jennifer Ravia"=>array(
		"point" =>"4.0",
		"grade"=>"B"
	),
	"Tanya Quist"=>array(
		"point" =>"3.9",
		"grade"=>"A"
	),
	"Dennis Ray"=>array(
		"point" =>"4.2",
		"grade"=>""
	),
	
"Travis Barman"=>array(
		"point" =>"2.3",
		"grade"=>"C"
	),
	"George Mateer"=>array(
		"point" =>"4.4",
		"grade"=>""
	),
	" Peter Ecke"=>array(
		"point" =>"4.9",
		"grade"=>"A"
	),
	"Steven Reff"=>array(
		"point" =>"4.3",
		"grade"=>"B"
	),
	"Guido Pincione"=>array(
		"point" =>"3.0",
		"grade"=>"A"
	),
	
"Francisco Galarte"=>array(
		"point" =>"3.0",
		"grade"=>"A"
	),
	"Minayo Nasiali"=>array(
		"point" =>"4.6",
		"grade"=>"A"
	),
	"Jadwiga Pieper"=>array(
		"point" =>"4.6",
		"grade"=>"C"
	),
	"David Gibbs"=>array(
		"point" =>"3.1",
		"grade"=>"A"
	),
	"Jennifer Mcstotts"=>array(
		"point" =>"3.1",
		"grade"=>"A"
	),
	"Victor Braitberg"=>array(
		"point" =>"4.2",
		"grade"=>"A"
	),
"Cathalena Burch"=>array(
		"point" =>"4.4",
		"grade"=>""
	),
"Cihan Artunc"=>array(
		"point" =>"4.5",
		"grade"=>""
	),
"Margaret Wilder"=>array(
		"point" =>"3.2",
		"grade"=>"B-"
	),
"Amy Fountain"=>array(
		"point" =>"3.6",
		"grade"=>"B"
	),
"Roger Dahlgran"=>array(
		"point" =>"4.3",
		"grade"=>"B"
	),
"Julio Cammarota"=>array(
		"point" =>"4.8",
		"grade"=>"A"
	),
"Roberto Rodriguez"=>array(
		"point" =>"4.4",
		"grade"=>""
	),
"Alexandre Sugiyama"=>array(
		"point" =>"2.5",
		"grade"=>"B"
	),

"Brandon Marshall"=>array(
		"point" =>"3.5",
		"grade"=>"A-"
	),
"Todd Neumann"=>array(
		"point" =>"4.1",
		"grade"=>"A"
	),
"Brandon Marshall"=>array(
		"point" =>"3.5",
		"grade"=>"A-"
	),
"Shaun Nichols"=>array(
		"point" =>"4.0",
		"grade"=>"A-"
	),
"Ana Sartorio"=>array(
		"point" =>"2.7",
		"grade"=>"A+"
	),
"Thomas Christiano"=>array(
		"point" =>"3.8",
		"grade"=>"A+"
	),
"Michael Gill"=>array(
		"point" =>"3.9",
		"grade"=>"B-"
	),
"John Willerton"=>array(
		"point" =>"3.5",
		"grade"=>"A"
	),
"Charity-Joy Acchiardo"=>array(
		"point" =>"4.0",
		"grade"=>"C"
	),
"Julie Feldman"=>array(
		"point" =>"4.4",
		"grade"=>"B"
	),
"Mark Stegeman"=>array(
		"point" =>"2.6",
		"grade"=>"C"
	),
"Mauricio Varela"=>array(
		"point" =>"4.3",
		"grade"=>"A"
	),
"Adam Lazarewicz"=>array(
		"point" =>"5.0",
		"grade"=>"A"
	),
"Kyle Wilson"=>array(
		"point" =>"4.1",
		"grade"=>"A"
	),
"Jennifer Earl"=>array(
		"point" =>"4.7",
		"grade"=>"B"
	),
"Jessamyn Schaller"=>array(
		"point" =>"5.0",
		"grade"=>"B"
	),
"John Drabicki"=>array(
		"point" =>"4.3",
		"grade"=>"A"
	),
"Mo Xiao"=>array(
		"point" =>"3.3",
		"grade"=>""
	),
"Rachana Kamtekar"=>array(
		"point" =>"3.4",
		"grade"=>""
	),
"Joseph Tolliver"=>array(
		"point" =>"3.5",
		"grade"=>""
	),

"Andrea McComb"=>array(
		"point" =>"5.0",
		"grade"=>""
	),
"Robert Burns"=>array(
		"point" =>"3.9",
		"grade"=>"A"
	),
"Alexander Nava"=>array(
		"point" =>"3.0",
		"grade"=>""
	),

"Max Strassfeld"=>array(
		"point" =>"4.5",
		"grade"=>""
	),
"Steven Martinson"=>array(
		"point" =>"2.8",
		"grade"=>"C"
	),
"Julian Kunnie"=>array(
		"point" =>"2.9",
		"grade"=>"A"
	),
"Adele Barker"=>array(
		"point" =>"3.5",
		"grade"=>"C"
	),
"Suzanne Thompson"=>array(
		"point" =>"2.5",
		"grade"=>""
	),
"Miriam Urzua-Montoya"=>array(
		"point" =>"2.8",
		"grade"=>"B"
	),
"William Neumann"=>array(
		"point" =>"3.1",
		"grade"=>"A"
	),

"Faiz Currim"=>array(
		"point" =>"3.5",
		"grade"=>"A"
	),
"Amy Geile"=>array(
		"point" =>"4.3",
		"grade"=>"B"
	),
"Karen Otto"=>array(
		"point" =>"4.3",
		"grade"=>"A!"
	),
"Janee Johnson"=>array(
		"point" =>"3.0",
		"grade"=>""
	),
"Heather Altman"=>array(
		"point" =>"4.0",
		"grade"=>"A"
	),
"Suzanne Delaney"=>array(
		"point" =>"4.2",
		"grade"=>"C"
	),
"Sushila Umashankar"=>array(
		"point" =>"2.7",
		"grade"=>"B"
	),
"Tracey Osborne"=>array(
		"point" =>"3.7",
		"grade"=>"A"
	),
"Daniel Marrone"=>array(
		"point" =>"4.7",
		"grade"=>"A"
	),
"Thomas Fleming"=>array(
		"point" =>"4.3",
		"grade"=>"A"
	),
"Nathan Smith"=>array(
		"point" =>"2.0",
		"grade"=>""
	),
"Pamela Vandiver"=>array(
		"point" =>"2.6",
		"grade"=>"A"
	),
"Travis Barman"=>array(
		"point" =>"2.3",
		"grade"=>"C"
	),
"Derek Lemoine"=>array(
		"point" =>"3.5",
		"grade"=>"B"
	),
"Steven Mullen"=>array(
		"point" =>"2.2",
		"grade"=>"C"
	),
"Charles Weidman"=>array(
		"point" =>"4.5",
		"grade"=>"A"
	),
"Joan Curry"=>array(
		"point" =>"3.3",
		"grade"=>"A"
	),
"Katherine Hirschboeck"=>array(
		"point" =>"4.3",
		"grade"=>"A"
	),
"Erica Bigio"=>array(
		"point" =>"4.5",
		"grade"=>""
	),
"Stephen Yool"=>array(
		"point" =>"4.2",
		"grade"=>"A"
	),
"Jessica Kapp"=>array(
		"point" =>"4.5",
		"grade"=>"A"
	),
"William Waldrip"=>array(
		"point" =>"4.0",
		"grade"=>""
	),
"Thomas Wilson"=>array(
		"point" =>"3.9",
		"grade"=>"A"
	),
"Suzanne Delaney"=>array(
		"point" =>"4.2",
		"grade"=>"C"
	),

"Pamela Perry"=>array(
		"point" =>"4.0",
		"grade"=>"0"
	),
"Jeffrey Welter"=>array(
		"point" =>"4.9",
		"grade"=>"A"
	),
"Nathan Podsakoff"=>array(
		"point" =>"2.0",
		"grade"=>"C"
	),



"Patrick Homer"=>array(
		"point" =>"3.8",
		"grade"=>"A"
	),

"John Hartman"=>array(
		"point" =>"3.7",
		"grade"=>"D"
	),

"Shaughan Lavine"=>array(
		"point" =>"2.3",
		"grade"=>"B"
	),


"Ravi Sethi"=>array(
		"point" =>"1.5",
		"grade"=>""
	),

"Sandiway Fon"=>array(
		"point" =>"1.7",
		"grade"=>""
	),
"Alon Efrat"=>array(
		"point" =>"2.4",
		"grade"=>""
	),



"Larry Peterson"=>array(
		"point" =>"2.5",
		"grade"=>"B"
	),


"Saumya Debray"=>array(
		"point" =>"2.7",
		"grade"=>"C"
	),

"Christian Collberg"=>array(
		"point" =>"4.0",
		"grade"=>""
	),


"Roman Lysecky"=>array(
		"point" =>"4.1",
		"grade"=>"A"
	),

"Johnny Bowens"=>array(
		"point" =>"3.8",
		"grade"=>"A"
	),
"Jennifer Roth Gordon"=>array(
		"point" =>"3.7",
		"grade"=>""
	),

"Angela Storey"=>array(
		"point" =>"2.5",
		"grade"=>"A"
	),

"Joe Gerald"=>array(
		"point" =>"2.7",
		"grade"=>"B"
	),
"Cheryl Knott"=>array(
		"point" =>"3.1",
		"grade"=>"A"
	),
"Richard Serlin"=>array(
		"point" =>"4.9",
		"grade"=>"A"
	),
"Jeffrey Banister"=>array(
		"point" =>"4.7",
		"grade"=>""
	),

	"Kristina Bishop"=>array(
		"point" =>"4.7",
		"grade"=>"A"
	),

"Gary Pivo"=>array(
		"point" =>"3.8",
		"grade"=>"A"
	),


"Dereka Rushbrook"=>array(
		"point" =>"3.1",
		"grade"=>"A"
	),


"Eithne Luibheid"=>array(
		"point" =>"3.3",
		"grade"=>""
	),

"Deborah Kaye"=>array(
		"point" =>"3.6",
		"grade"=>""
	),
"David Graizbord"=>array(
		"point" =>"3.3",
		"grade"=>"C"
	),
"William Simmons"=>array(
		"point" =>"4.2",
		"grade"=>"A"
	),


"Victor Braitberg"=>array(
		"point" =>"4.2",
		"grade"=>"A"
	),

"Paulette Kurzer"=>array(
		"point" =>"2.8",
		"grade"=>"B"
	),


"Kristina Bishop"=>array(
		"point" =>"4.7",
		"grade"=>"A"
	),



"Lydia Otero"=>array(
		"point" =>"4.6",
		"grade"=>""
	),
"Rosario Carrillo"=>array(
		"point" =>"2.8",
		"grade"=>"A"
	),
"Guido Pincione"=>array(
		"point" =>"3.0",
		"grade"=>"A"
	),
"Dan Shahar"=>array(
		"point" =>"3.8",
		"grade"=>"A"
	),

"Massi Piattelli-Palmarini"=>array(
		"point" =>"2.8",
		"grade"=>""
	),

"Joseph Toliver"=>array(
		"point" =>"3.5",
		"grade"=>""
	),
"Hester Oberman"=>array(
		"point" =>"4.1",
		"grade"=>"A"
	),
"Bryan Chambliss"=>array(
		"point" =>"3.5",
		"grade"=>"A"
	),
"Gary Pivo"=>array(
		"point" =>"3.8",
		"grade"=>"A"
	),
"Barbara Norrander"=>array(
		"point" =>"3.0",
		"grade"=>"A"
	),



"William Dixon"=>array(
		"point" =>"3,4",
		"grade"=>"A"
	),
"Paulette Kurzer"=>array(
		"point" =>"2.8",
		"grade"=>"B"
	),
"Rebecca Gomez"=>array(
		"point" =>"3.0",
		"grade"=>"A"
	),

"Joseph Tolliver"=>array(
		"point" =>"3.5",
		"grade"=>""
	),
"Bryan Chambliss"=>array(
		"point" =>"3.5",
		"grade"=>"A"
	),
"Julian Kunnier"=>array(
		"point" =>"2.9",
		"grade"=>"A"
	),
"Hester Oberman"=>array(
		"point" =>"4.1",
		"grade"=>"A"
	),
"Andrea McComb"=>array(
		"point" =>"5.0",
		"grade"=>""
	),
"David Graizbord"=>array(
		"point" =>"3.3",
		"grade"=>"C"
	),
"Gary Pivo"=>array(
		"point" =>"3.8",
		"grade"=>"A"
	),
"Suzanne Thompson"=>array(
		"point" =>"2.5",
		"grade"=>""
	),
"James Dean"=>array(
		"point" =>"3.4",
		"grade"=>"B"
	),
"Johnny Bowens"=>array(
		"point" =>"3.8",
		"grade"=>"A"
	),
"Dereka Rushbrook"=>array(
		"point" =>"3.1",
		"grade"=>"A"
	),
"Beatriz Urrea"=>array(
		"point" =>"3.9",
		"grade"=>"A"
	),
"Elaine Marchello"=>array(
		"point" =>"4.0",
		"grade"=>"A"
	),


"Bayo Ijagbemi"=>array(
		"point" =>"2.8",
		"grade"=>"B-"
	),
"Yuxuf Abana"=>array(
		"point" =>"2.5",
		"grade"=>"B"
	),
"Bonnie Wasserman"=>array(
		"point" =>"3.8",
		"grade"=>"B"
	),
"Bryan Carter"=>array(
		"point" =>"4.9",
		"grade"=>"A+"
	),
"David Killick"=>array(
		"point" =>"3.6",
		"grade"=>"C+"
	),
"Stacie Widdifield"=>array(
		"point" =>"2.5",
		"grade"=>""
	),
	
	"John Bauschatz"=>array(
		"point" =>"4.1",
		"grade"=>""
	),
"Robert Groves"=>array(
		"point" =>"3.5",
		"grade"=>"B"
	),
"Robert Schon"=>array(
		"point" =>"3.5",
		"grade"=>"B"
	),
"Jennifer Croissant"=>array(
		"point" =>"2.2",
		"grade"=>"A"
	),
"Fabio Lanza"=>array(
		"point" =>"4.4",
		"grade"=>"B+"
	),
"Jeremy Vetter"=>array(
		"point" =>"2.1",
		"grade"=>"B-"
	),


"Charles Betsch"=>array(
		"point" =>"3.6",
		"grade"=>"A"
	),
"Patrick Baliani"=>array(
		"point" =>"4.4",
		"grade"=>"A-"
	),
"Scott Lucas"=>array(
		"point" =>"3.5",
		"grade"=>"B"
	),
"Taseen Noorani"=>array(
		"point" =>"2.5",
		"grade"=>"B"
	),
"Daniel Asia"=>array(
		"point" =>"1.9",
		"grade"=>"C+"
	),
"Michael Gill"=>array(
		"point" =>"3.9",
		"grade"=>"B-"
	),

"Jennifer Croissant"=>array(
		"point" =>"2.2",
		"grade"=>"A"
	),
	"Fabio Lanza"=>array(
		"point" =>"4.4",
		"grade"=>"B+"
	),
	"Jeremy Vetter"=>array(
		"point" =>"2.1",
		"grade"=>"B-"
	),
	"Charles Bertsch"=>array(
		"point" =>"3.6",
		"grade"=>"A"
	),
	"Patrick Baliani"=>array(
		"point" =>"4.4",
		"grade"=>"A-"
	),
"Scott Lucas"=>array(
		"point" =>"3.5",
		"grade"=>"B"
	),
	"Yaseen Noorani"=>array(
		"point" =>"2.5",
		"grade"=>"B"
	),
	"Daniel Asia"=>array(
		"point" =>"1.9",
		"grade"=>"C+"
	),
	"Michael Gill"=>array(
		"point" =>"3.9",
		"grade"=>"B-"
	),
	"Terence Horgan"=>array(
		"point" =>"2.5",
		"grade"=>"A"
	),
"Robert Burns"=>array(
		"point" =>"3.9",
		"grade"=>"A"
	),
	"Alison Jameson"=>array(
		"point" =>"2.0",
		"grade"=>"B"
	),
	"Robert Mannan"=>array(
		"point" =>"4.7",
		"grade"=>"A"
	),
	"Adele Barker"=>array(
		"point" =>"3.5",
		"grade"=>"C+"
	),
"Suzanne Thompson"=>array(
		"point" =>"2.5",
		"grade"=>""
	),
	"Dolores Bahti"=>array(
		"point" =>"1.5",
		"grade"=>"A-"
	),
	"Melissa Fitch"=>array(
		"point" =>"3.3",
		"grade"=>"A+"
	),
	"David Yarnelle"=>array(
		"point" =>"3.0",
		"grade"=>"B+"
	),
"Barbara Mckean"=>array(
		"point" =>"3.6",
		"grade"=>""
	),
	"Bonnie Wasserman"=>array(
		"point" =>"3.8",
		"grade"=>"B"
	),
	"Johnny Bowens"=>array(
		"point" =>"3.8",
		"grade"=>"A-"
	),
	"Yuxuf Abana"=>array(
		"point" =>"2.5",
		"grade"=>"B"
	),
"Julian Kunnie"=>array(
		"point" =>"2.9",
		"grade"=>"A"
	),
	"Hai Ren"=>array(
		"point" =>"3.0",
		"grade"=>"A"
	),
	"Rachana Kamtekar"=>array(
		"point" =>"3.4",
		"grade"=>""
	),
"Alexandra Kennedy"=>array(
		"point" =>"3.1",
		"grade"=>"B-"
	),
	" Daniel Cooper Alarcon"=>array(
		"point" =>"4.5",
		"grade"=>""
	),
	"Geta Leseur-Brown"=>array(
		"point" =>"1.5",
		"grade"=>"A-"
	),
	"Charles Sherry"=>array(
		"point" =>"2.4",
		"grade"=>""
	),
"Marie-Pierre Le Hir"=>array(
		"point" =>"4.4",
		"grade"=>""
	),
	"David Gramling"=>array(
		"point" =>"4.7",
		"grade"=>"A+"
	),
	"Barbara Kosta"=>array(
		"point" =>"3.6",
		"grade"=>"C+"
	),
	"Thomas Kovach"=>array(
		"point" =>"3.1",
		"grade"=>"A-"
	),
"Steven Martinson"=>array(
		"point" =>"2.8",
		"grade"=>"C+"
	),
	"Scott Lucas"=>array(
		"point" =>"3.5",
		"grade"=>"B"
	),
	"Maha Nassar"=>array(
		"point" =>"4.0",
		"grade"=>""
	),
	"Beth Nakhai"=>array(
		"point" =>"3.9",
		"grade"=>"B"
	),
"Charles Bertsch"=>array(
		"point" =>"3.6",
		"grade"=>"A"
	),
	"Patrick Baliani"=>array(
		"point" =>"4.4",
		"grade"=>"A-"
	),
	"Jennifer Mcstotts"=>array(
		"point" =>"3.1",
		"grade"=>"A"
	),
	"Daisy Pitkin"=>array(
		"point" =>"3.6",
		"grade"=>""
	),
"Fabian Alfie"=>array(
		"point" =>"4.2",
		"grade"=>"A"
	),
	"Elizabeth Zegura"=>array(
		"point" =>"4.7",
		"grade"=>"A+"
	),
	"Abigail Limmer"=>array(
		"point" =>"3.0",
		"grade"=>"B"
	),
	"Thomas Kovach"=>array(
		"point" =>"3.1",
		"grade"=>"A-"
	),
	"Maha Nassar"=>array(
		"point" =>"4.0",
		"grade"=>""
	),
	"Mark Timmons"=>array(
		"point" =>"3.5",
		"grade"=>"B"
	),
	"Daniel Russell"=>array(
		"point" =>"3.2",
		"grade"=>"C"
	),
"Johnny Bowens"=>array(
		"point" =>"3.8",
		"grade"=>"A-"
	),
"Berbea Williams"=>array(
		"point" =>"",
		"grade"=>""
	),
"Michael Williams"=>array(
		"point" =>"4.3",
		"grade"=>""
	),
"H SOren"=>array(
		"point" =>"",
		"grade"=>""
	),
"Benjamin Schaefer"=>array(
		"point" =>"",
		"grade"=>""
	),
"Daisy Pitkin"=>array(
		"point" =>"",
		"grade"=>""
	),
"Kelland Thomas"=>array(
		"point" =>"4.6",
		"grade"=>"B-"
	),
"Nathaniel Smith"=>array(
		"point" =>"4.6",
		"grade"=>"A-"
	),
"Dawn Corso"=>array(
		"point" =>"",
		"grade"=>""
	),
"Keith Pawlak"=>array(
		"point" =>"2.4",
		"grade"=>"B+"
	),
"Jennifer Post"=>array(
		"point" =>"2.8",
		"grade"=>"B"
	),
"David Yarnelle"=>array(
		"point" =>"3.0",
		"grade"=>"B+"
	),
"S Stock"=>array(
		"point" =>"",
		"grade"=>""
	),
"Stacey Tecot"=>array(
		"point" =>"4.8",
		"grade"=>"C+"
	),

"Horst Stekis"=>array(
		"point" =>"",
		"grade"=>""
	),

"Daniel Stark"=>array(
		"point" =>"",
		"grade"=>""
	),

"Ann Zabludoff"=>array(
		"point" =>"3.2",
		"grade"=>""
	),

"Joseph Spitale"=>array(
		"point" =>"",
		"grade"=>""
	),

"Dale Ward"=>array(
		"point" =>"2.7",
		"grade"=>"B"
	),

"Pemela Vandiver"=>array(
		"point" =>"",
		"grade"=>""
	),

"Joan Curryk"=>array(
		"point" =>"3.3",
		"grade"=>"A+"
	),

"Joseph Spitale"=>array(
		"point" =>"",
		"grade"=>""
	),

"Paul Goodman"=>array(
		"point" =>"4.4",
		"grade"=>"A-"
	),

"Paul Sheppard"=>array(
		"point" =>"3.8",
		"grade"=>"A-"
	),

"Marek Zreda"=>array(
		"point" =>"",
		"grade"=>""
	),

"Martha Whltaker"=>array(
		"point" =>"",
		"grade"=>""
	),

"Kelly Jackson"=>array(
		"point" =>"4.4",
		"grade"=>"A"
	),

"Michael Nofziger"=>array(
		"point" =>"3.8",
		"grade"=>"A"
	),

"Andrew Lotto"=>array(
		"point" =>"3.9",
		"grade"=>"A-"
	),

"James Dean"=>array(
		"point" =>"4.0",
		"grade"=>"B"
	),
	"James Clouser"=>array(
		"point" =>"4.1",
		"grade"=>"A+"
	)

	
	
);


function replay($keyword){
	global $term;
	$CSCmain = array("CSC127A","CSC127B","CSC252","CSC245","CSC335","CSC337");
	if (strtoupper(substr($keyword,0,3))=="ALL"){
		$sub_code = trim(strtoupper(substr($keyword,3)));
		return makeAllsubjectsRows(toArray(getAllClasses($term, $sub_code)));
	}
	elseif(preg_match("#[a-zA-Z]+\d+.+#", $keyword, $subject)==1) {
		#echo "Vvvvvvv=: ". preg_match("#[a-zA-Z]+\d+.+#", $keyword, $subject);
		return giveClassAbliabltyCheck($term,$keyword);
	}
	elseif (strtoupper(substr($keyword,0,4))=="LIST"){
		
		return getListDetail($term,$CSCmain);
	}
	elseif(strtoupper($keyword)=="T1"){
		return getListDetail($term,array("AFAS160D1","AFAC160A2","EAS160A3","GEOS170A1","GEOG170A1"));
		
	}
	elseif($keyword=="水课"){
		return "请输入t1或t2,我们不推荐没有作业的水课，我们只推荐老师给分高的课，只要认真做作业，学到了东西也能拿A，那才是我们希望的 :D";
	}
	else{
		return "使用说明:\n1.输入任何课号查询课程被选率，如csc127a(不区分大小写)\n2.你也可以输入all+主课缩写查询所有课程,如allcsc";
	}

}






#echo (giveClassAbliabltyCheck("CSC252"));

#echo (giveClassAbliabltyCheck("CSC127A"));
#$SubjectsWithDescr = saveAllSubjects($term);
#$Subjects = getSUbjectsOnly($term);
#print_r(classtoSimpleText(getClassDetail(2154, "CSC", "245")));
#print_r(getClassDetail(2154, "CSC", "337"));



#print_r(is_array([1,2,3,4,5,7]));
#print_r(is_object(getAllClasses($term, "CSC")));
#dump((getClassDetail($term, "CSC", "335")));
#printRow(toArray(getAllClasses($term, "CSC")));
#echo makeRows(toArray(getAllClasses($term, "CSC"), "catalog_nbr" ));
#test();
echo replay("csc127a");
#replay("allcsc");

#echo replay("list");




function getListDetail($term, $classes){
	$str ="";   # array( array())
	
	foreach ($classes as $class){
		
		
		
		if (preg_match("#[a-zA-Z]+#", $class, $subject)){
			
			preg_match("#(\d+.+)#", $class, $number);
			#echo $subject[0]."---". $number[0]."<br>";
			$classobj = getClassDetail($term, strtoupper($subject[0]), $number[0]);
			if ($classobj==""){
				continue;
			}
			$str = $str.getoutputFromOneClassArray($classobj);
		
		}
		
		
	
		
		
	}
	return $str;

}


function getoutputFromOneClassArray($oneclassJson){
	# ---------class name , # class avilable
	
	$class =  json_decode($oneclassJson,true);
	
	$avliableForAll = 0;
	$name = "";
	if (count($class["CourseDetail"]) != 13){
		
		
		foreach ($class["CourseDetail"] as $section){
			$name = $section["subject_code"].$section["catalog_nbr"];
			$avSection = intval($section["enroll_cap"]) - intval($section["enroll_cur"]);
			#echo $avSection."<br>";
			if ($avSection<0){
				$avSection = 0;
			}
			$avliableForAll = $avliableForAll + $avSection;
				
		}
		
	}
	else{
		$name = $class["CourseDetail"]["subject_code"].$class["CourseDetail"]["catalog_nbr"];
			$avSection = intval($class["CourseDetail"]["enroll_cap"]) - intval($class["CourseDetail"]["enroll_cur"]);
		#echo $avSection."<br>";
		if ($avSection<0){
				$avSection = 0;
			}
	}
	
	#print_r($name." 座位: ".$avliableForAll."\n");
	
	return $name." 座位: ".$avliableForAll."\n";
	
}







function printRow($arr){
	if ($arr == null){
		return;
	}
	foreach ($arr as $key){
		
		print_r($key);
		print_r('<br>');
		}
}







function getAllSubjects($term){
	### subject_code, subject_descr
	$xml = simplexml_load_file('https://ws.uits.arizona.edu/UA_Courses/subjects?term_code='.$term);
	$namespaces = $xml->getNameSpaces(true);
	
	$xml_ns1 = $xml->children($namespaces['ns1']);
	return $xml_ns1;
	
}

function getAllClasses($term, $subject_code){
	### term_code, subject_code, catalog_nbr, descr 
	$xml = simplexml_load_file('https://ws.uits.arizona.edu/UA_Courses/courses?subject_code='.$subject_code.'&term_code='.$term);
	
	$namespaces = $xml->getNameSpaces('true');
	if(count($namespaces)>1){
	
	$xml_ns1 = $xml->children($namespaces['ns1']);
	return $xml_ns1;
	}
	else{
	echo $subject_code. " have no class <br>";
	}
}

function getClassDetail($term, $subject, $class_Num){
	###return An Json;
	$arr = array();
	$xml = simplexml_load_file('https://ws.uits.arizona.edu/UA_Courses/crsdetail?subject_code='.$subject.'&catalog_nbr='.$class_Num.'&term_code='.$term);
	$namespaces = $xml->getNameSpaces('true');
	if(count($namespaces)>1){
	#$namespaces = $xml->getNameSpaces(true);
	#$xml_ns1 = $xml->children($namespaces['ns1']);
	return json_encode(getchildren($xml->children('ns1',true)->children('ns1',true)));
	}
	return "";
	
}

function classtoSimpleText($json){
	global $score;
	#echo $json;
	
	$str = "";
	if ($json == null)
	{
		return "抱歉没有这节课,检查课是否含有ABC后缀,不区分大小写,你也可以输入all+主课缩写查询所有课程.\n补充申明:我们没有黑学校的网";
	}
	$json = json_decode($json,true);
	#echo  count($json["CourseDetail"]);
	#print_r( $json["CourseDetail"]["MeetingCollection"]["Meeting"]);
	if (array_key_exists(0,$json["CourseDetail"])){
	$str =  "----------".$json["CourseDetail"][0]["catalog_nbr"]."----------\n";
	foreach ($json["CourseDetail"] as $title => $oneclass){
		
		if ($oneclass["enroll_stat"]=="O"){
				$oneclass["enroll_stat"]="√";
				
			}
			else{
				$oneclass["enroll_stat"]="X";
				
			}
		
		$str = $str. $oneclass["section"].": ".$oneclass["course_type"];
		if (array_key_exists(1,$oneclass["MeetingCollection"]["Meeting"])){
			$pro_name = $oneclass["MeetingCollection"]["Meeting"][0]["InstructorCollection"]["Instructor"]["fullname"];
		}
			
			
		elseif (array_key_exists(0,$oneclass["MeetingCollection"]["Meeting"]["InstructorCollection"]["Instructor"]))
			{
			$pro_name = $oneclass["MeetingCollection"]["Meeting"]["InstructorCollection"]["Instructor"][0]["fullname"];
			}
		else{
		$pro_name = $oneclass["MeetingCollection"]["Meeting"]["InstructorCollection"]["Instructor"]["fullname"];
		} 
			
				
			$point = "无";
			$grade = "无";
		try{
			if (array_key_exists($pro_name,$score)){
				$point = $score[$pro_name]["point"];
				$grade = $score[$pro_name]["grade"];
			}
		}catch(Exception $e){
			echo $pro_name;
		}
			$str = $str." ---".$pro_name. "\n 评: ".$point." - 分: ".$grade."\n";
		
		$str = $str. "总: ".$oneclass["enroll_cap"]." 现有: ".$oneclass["enroll_cur"]." 是否可选: ".$oneclass["enroll_stat"]."\n";
	}
	}
		else{
			if ($json["CourseDetail"]["enroll_stat"]=="O"){
				$json["CourseDetail"]["enroll_stat"]="√";
				
			}
			else{
				$json["CourseDetail"]["enroll_stat"]="X";
				
			}
		$str = $str. $json["CourseDetail"]["section"].": ".$json["CourseDetail"]["course_type"];
			if (array_key_exists(0,$json["CourseDetail"]["MeetingCollection"]["Meeting"]["InstructorCollection"]["Instructor"]))
			{
			$pro_name = $json["CourseDetail"]["MeetingCollection"]["Meeting"]["InstructorCollection"]["Instructor"][0]["fullname"];
			}
		else{
		$pro_name = $json["CourseDetail"]["MeetingCollection"]["Meeting"]["InstructorCollection"]["Instructor"]["fullname"];
		} 
				
			$point = "无";
			$grade = "无";
			if (array_key_exists($pro_name,$score)){
				$point = $score[$pro_name]["point"];
				$grade = $score[$pro_name]["grade"];
			}
			$str = $str." ---".$pro_name. "\n 评: ".$point." - 分: ".$grade."\n";
		
		$str = $str. "总: ".$json["CourseDetail"]["enroll_cap"]." 现有: ".$json["CourseDetail"]["enroll_cur"]." 是否可选: ".$json["CourseDetail"]["enroll_stat"]."\n";
		}
	
	return $str;
}

function giveClassAbliabltyCheck($term,$class){
	if (preg_match("#([a-zA-Z]+)#", $class, $subject)){
		
		preg_match("#(\d+.+)#", $class, $number);
		#return ($subject[0]."==".$number[0].'\n');
		
		return classtoSimpleText(getClassDetail($term, strtoupper($subject[0]), $number[0])).'<a href="http://whichclasses.com/classes/'.strtoupper($subject[0]).'/'.strtoupper($number[0]).'/" >'.UA学生官方评价.'</a>';
		
	}
	else{
		return "使用说明:\n1.输入任何课号查询课程被选率，如csc127a(不区分大小写)\n2.你也可以输入all+主课缩写查询所有课程,如allcsc";
	}
	
	
	
}
function makeAllsubjectsRows($arr, $prefix=""){
	$str = "";
	if ($arr == null){
		return "课程缩写找不到哦";
	}
	foreach ($arr as $key){
		
		if (preg_match("#5\d\d#", $key["catalog_nbr"], $number) ==1){
			return $str;
		}
			
		$row = $key["catalog_nbr"].": ".substr($key["descr"],0,15)."..";
		$str = $str.$row."\n";
		
		}
	
	return $str;
}







function getchildren($xml){
	$outArr = array();
	if (is_object($xml)==1){
		$xml =(array)$xml;
	}
	
	#print_r((array)$xml);
	foreach ($xml as $key => $value){
		
		$inerArr = array();
		if (is_object($value) or is_array($value)){
			$inerArr[$key] = getchildren($value);
		}
		else{
			$inerArr[$key] = $value;
		}
		if (count($inerArr)==1){
			$outArr[$key] = $value;
		}
		else{
		array_push($outArr,$inerArr);
		}
	}
	return $outArr;

}



function saveAllSubjects($term){
	## return subject_code, subject_descr
	$arr = toArray(getAllSubjects($term));	
	return $arr;
}


function getSUbjectsOnly($term){
	$arr = toArray(getAllSubjects($term),"subject_code");
	return $arr;
}

function toArray($xml, $keyword=null){
	$arr= array();
	## if keyword == null, return all keywords array in xml
	if ($xml==null){
		return $arr;
	}
	
	if ($keyword == null){
		foreach ($xml as $element){
			array_push($arr, (array)$element);
		}
	}
	else{
		foreach ($xml as $element){
			$element = (array)$element;
			array_push($arr, $element[$keyword]);
		}
	}
	
	return $arr;

}

#token UAclass
#EncodingAESKey  YCauDhGf29dVIg2U6YH8BZEL5LSovhAQUU3y4MbTkVa
?>